install.packages("rgdal")
install.packages("terra")
install.packages("raster")
install.packages("viridis")
install.packages("openair")
install.packages("ggplot2")
1+1
3*4
3^3
load("/home/cschmidt/projects/attaino3/code/bias_christos/intermediate_files/obsdata")
obs
load("/home/cschmidt/projects/attaino3/code/bias_christos/intermediate_files/att_hist_rcp26_o3_t2_fixed")
install.packages("jsonlite")
install.packages("languageserver")
load("/home/cschmidt/projects/attaino3/code/bias_christos/intermediate_files/att_hist_rcp26_o3_t2_fixed")
obs
mod_f_O3_ugm3
library(terra)
setwd("~/projects/attaino3/repos/attain_paper/code/districtt_mapping")
setwd("~/projects/attaino3/repos/attain_paper/code/districtt_mapping")
county_shp <- vect("~/data/shp/OGDEXT_GEM_1_STATISTIK_AUSTRIA_20220101/STATISTIK_AUSTRIA_GEM_20220101.shp")
district_shp <- vect("~/data/shp/OGDEXT_POLBEZ_1_STATISTIK_AUSTRIA_20220101/STATISTIK_AUSTRIA_POLBEZ_20220101.shp")
print(county_shp)
values(county_shp)
county_data <- values(county_shp)
district_shp <- values(district_shp)
library(terra)
setwd("~/projects/attaino3/repos/attain_paper/code/districtt_mapping")
county_shp <- vect("~/data/shp/OGDEXT_GEM_1_STATISTIK_AUSTRIA_20220101/STATISTIK_AUSTRIA_GEM_20210101.shp")
district_shp <- vect("~/data/shp/OGDEXT_POLBEZ_1_STATISTIK_AUSTRIA_20220101/STATISTIK_AUSTRIA_POLBEZ_20210101.shp")
county_data <- values(county_shp)
district_shp <- values(district_shp)
library(terra)
setwd("~/projects/attaino3/repos/attain_paper/code/districtt_mapping")
county_shp <- vect("~/data/shp/OGDEXT_GEM_1_STATISTIK_AUSTRIA_20210101/STATISTIK_AUSTRIA_GEM_20210101.shp")
district_shp <- vect("~/data/shp/OGDEXT_POLBEZ_1_STATISTIK_AUSTRIA_20210101/STATISTIK_AUSTRIA_POLBEZ_20210101.shp")
county_data <- values(county_shp)
district_shp <- values(district_shp)
county_data$id
setwd("~/projects/attaino3/repos/attain_paper/code/districtt_mapping")
county_shp <- vect("~/data/shp/OGDEXT_GEM_1_STATISTIK_AUSTRIA_20210101/STATISTIK_AUSTRIA_GEM_20210101.shp")
district_shp <- vect("~/data/shp/OGDEXT_POLBEZ_1_STATISTIK_AUSTRIA_20210101/STATISTIK_AUSTRIA_POLBEZ_20210101.shp")
county_data <- values(county_shp)
district_data <- values(district_shp)
county_data$id
source("~/projects/attaino3/repos/attain_paper/code/districtt_mapping/district_mapping.R", echo=TRUE)
substr(county_data$id)
substr(county_data$id,1,3)
which(substr(county_data$id,1,3) %in% district_data$id)
which(substr(county_data$id,1,3) %in% district_data$id,arr.ind = T)
which(district_data$id %in% substr(county_data$id,1,3))
which(substr(county_data$id,1,3) %in% district_data$id,arr.ind = T)
which(substr(county_data$id,1,3) == district_data$id,arr.ind = T)
match(substr(county_data$id,1,3) %in% district_data$id,arr.ind = T)
match(substr(county_data$id,1,3) %in% district_data$id)
match(substr(county_data$id,1,3),district_data$id)
dist_match <- match(substr(county_data$id,1,3),district_data$id)
district_match <- match(substr(county_data$id,1,3),district_data$id)
district_match <- match(substr(county_data$id,1,3),district_data$id)
datadir <- "~/data/county_mapped/"
list.files(datadir)
input_files <- list.files(datadir)
input_f <- list.files(datadir)
input_files <- list.files(datadir,full.names = T)
read.csv(input_files[1])
test_in <- read.csv(input_files[1])
?groupng
?grouping
district_match
unique(district_match)
district_int <- unique(district_match)
which(i == dist_match)
for (i in district_int) {
which(i == dist_match)
}
which(i == dist_match)
which(13 == dist_match)
apply(test_in[,which(i == dist_match)], 1, mean)
test_in[,which(i == dist_match)]
apply(test_in[,which(i == dist_match)], 2, mean)
?apply
test_in[,which(i == dist_match)]
apply(test_in[,which(i == dist_match)], 2, mean)
for (i in district_int) {
apply(test_in[,which(i == dist_match)], 2, mean)
}
apply(test_in[,which(i == dist_match)], 2, mean,na.rm=TT)
apply(test_in[,which(i == dist_match)], 2, mean,na.rm=T)
apply(test_in[,which(2 == dist_match)], 2, mean,na.rm=T)
test_in[,which(2 == dist_match)]
apply(test_in[-c(1,2),which(i == dist_match)], 2, mean,na.rm=T)
apply(test_in[-c(1,2),which(2 == dist_match)], 2, mean,na.rm=T)
test_in[-c(1,2),which(2 == dist_match)]
test_in[-c(1,2),]
test_in <- read.csv(input_files[1])[,-c(1,2)]
district_int <- unique(district_match)
for (i in district_int) {
apply(test_in[-c(1,2),which(i == dist_match)], 2, mean,na.rm=T)
}
apply(test_in[,which(i == dist_match)], 2, mean,na.rm=T)
district_int <- unique(district_match)
for (i in district_int) {
apply(test_in[,which(i == dist_match)], 2, mean,na.rm=T)
}
apply(test_in[,which(2 == dist_match)], 2, mean,na.rm=T)
test_in[,which(2 == dist_match)]
which(2 == dist_match)]
which(2 == dist_match)
which(3 == dist_match)
apply(test_in[,which(3 == dist_match)], 2, mean,na.rm=T)
apply(test_in[,which(3 == dist_match)], 1, mean,na.rm=T)
apply(test_in[,which(i == dist_match)], 1, mean,na.rm=T)
for (i in district_int) {
apply(test_in[,which(i == dist_match)], 1, mean,na.rm=T)
}
apply(test_in[,which(3 == dist_match)], 1, mean,na.rm=T)
apply(test_in[,which(3 == dist_match)], 1, sum,na.rm=T)
apply(test_in[,which(i == dist_match)], 1, sum,na.rm=T)
for (i in district_int) {
apply(test_in[,which(i == dist_match)], 1, sum,na.rm=T)
}
for (i in district_int) {
apply(test_in[,which(i == dist_match)], 1, sum,na.rm=T)
}
sapply(test_in[,which(3 == dist_match)], 1, sum,na.rm=T)
lapply(test_in[,which(3 == dist_match)], 1, sum,na.rm=T)
mapply(test_in[,which(3 == dist_match)], 1, sum,na.rm=T)
apply(test_in[,which(3 == dist_match)], 1, sum,na.rm=T)
